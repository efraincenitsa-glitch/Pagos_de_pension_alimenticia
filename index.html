<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>PensiÃ³n Alimenticia PRO ULTRA</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="PensiÃ³n PRO">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" sizes="1024x1024" href="icono-1024.png">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0b1220;
  color:white;
  text-align:center;
}

.container{
  padding:40px 20px;
}

button{
  padding:14px 24px;
  font-size:16px;
  border:none;
  border-radius:12px;
  background:#22c55e;
  color:white;
  font-weight:bold;
  cursor:pointer;
  margin-top:20px;
}

button.logout{
  background:#ef4444;
}

.card{
  background:#111827;
  border-radius:18px;
  padding:20px;
  margin-top:20px;
  box-shadow:0 0 20px rgba(0,0,0,0.4);
}
</style>
</head>

<body>

<div id="app" class="container">
  â³ Cargando...
</div>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";

import {
  getAuth,
  GoogleAuthProvider,
  signInWithRedirect,
  getRedirectResult,
  onAuthStateChanged,
  signOut
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";


// ğŸ”¥ TU CONFIGURACIÃ“N (YA CORRECTA)

const firebaseConfig = {
  apiKey: "AIzaSyDTV8IdIsfFFU5X30dOckR5_9pmLqgidBY",
  authDomain: "pensionpro-1e559.firebaseapp.com",
  projectId: "pensionpro-1e559",
  storageBucket: "pensionpro-1e559.firebasestorage.app",
  messagingSenderId: "354313368373",
  appId: "1:354313368373:web:becef8b8ff21d51c58927c"
};


const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const appDiv = document.getElementById("app");


// ğŸ” LOGIN
window.loginGoogle = () => {
  signInWithRedirect(auth, provider);
};


// â­ PROCESAR REGRESO DE GOOGLE
getRedirectResult(auth).catch(() => {});


// â­ CONTROL DE SESIÃ“N
onAuthStateChanged(auth, user => {

  if (user) {

    // ğŸ”’ SOLO TU CORREO (OPCIONAL)
    const correoPermitido = "jose.efrass@gmail.com";

    if (user.email !== correoPermitido) {
      signOut(auth);
      appDiv.innerHTML = `
        <h2>â›” Acceso no autorizado</h2>
      `;
      return;
    }

    appDiv.innerHTML = `
      <h1>PensiÃ³n Alimenticia PRO ULTRA ğŸ”</h1>

      <div class="card">
        <h3>âœ”ï¸ SesiÃ³n activa</h3>
        <p>${user.email}</p>
      </div>

      <div class="card">
        <h3>ğŸ“Š Sistema listo</h3>
        <p>Tu aplicaciÃ³n privada estÃ¡ protegida y sincronizada.</p>
      </div>

      <button class="logout" onclick="logout()">Cerrar sesiÃ³n</button>
    `;

  } else {

    appDiv.innerHTML = `
      <h1>PensiÃ³n Alimenticia PRO ULTRA ğŸ”</h1>

      <p>Acceso privado</p>

      <button onclick="loginGoogle()">
        Entrar con Google
      </button>
    `;
  }

});


// ğŸ”“ LOGOUT
window.logout = () => signOut(auth);

</script>

</body>
</html>
